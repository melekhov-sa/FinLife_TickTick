{% extends "base.html" %}
{% block title %}Подтверждение операции — FinLife{% endblock %}

{% block content %}
<h1>Подтверждение операции</h1>

<div class="card">
  <h2>{{ template.title }}</h2>
  <p class="muted">Запланировано на {{ occurrence.scheduled_date.strftime('%d.%m.%Y') }}</p>

  <form method="POST" action="/plan/operation-occurrences/{{ occurrence.id }}/confirm">
    <input type="hidden" name="redirect" value="{{ redirect }}">

    <div class="form-row">
      <label>Тип</label>
      <input type="text" value="{{ kind_label }}" disabled>
    </div>

    <div class="form-row">
      <label>Кошелёк</label>
      <select name="wallet_id">
        {% for w in wallets %}
        <option value="{{ w.wallet_id }}" {% if w.wallet_id == template.wallet_id %}selected{% endif %}>
          {{ w.title }} ({{ w.currency }})
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-row">
      <label>Сумма</label>
      <input name="amount" type="number" step="0.01" value="{{ template.amount }}" required>
    </div>

    <div class="form-row">
      <label>Категория</label>
      <select name="category_id">
        <option value="">Без категории</option>
        {% for c in categories %}
        <option value="{{ c.category_id }}" {% if c.category_id == template.category_id %}selected{% endif %}>
          {{ c.title }}
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-row">
      <label>Описание</label>
      <input name="description" value="{{ template.title }}" required>
    </div>

    <div style="display: flex; gap: 8px; margin-top: 12px;">
      <button type="submit">Подтвердить</button>
      <a href="{{ redirect }}" style="padding: 8px 16px; border: 1px solid #ddd; border-radius: 6px; text-decoration: none; color: #666; display: inline-flex; align-items: center;">Отмена</a>
    </div>
  </form>
</div>
{% endblock %}
